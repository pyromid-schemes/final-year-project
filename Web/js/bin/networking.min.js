function openWebSocket(a){var b=document.getElementById("url").value;ws=new WebSocket("ws://"+b+":9998"),ws.onopen=function(){readyToSend=!0,a.onOpen()},ws.onmessage=function(b){var c=new FileReader;c.addEventListener("loadend",function(b){var c=JSON.parse(b.target.result.substring(1));if(c.hasOwnProperty("command"))switch(c.command){case"worldStatus":a.onMessage.worldStatus(c.objects);break;case"positions":a.onMessage.vrPosition(c.vrPosition),a.onMessage.mobPositions(c.mobs)}}),c.readAsText(b.data)},ws.onclose=function(){readyToSend=!1,a.onClose()}}function closeWebSocket(){ws.close()}function sendMessage(a){readyToSend&&ws.send(" "+a)}var UnityClient={buildCommand:function(a,b,c){var d={command:"build",options:{objectId:a,xPos:b,zPos:c}};sendMessage(JSON.stringify(d))},spawnMobCommand:function(a,b,c,d){var e={command:"spawnMob",options:{objectId:a,xPos:b,zPos:c,id:d}};sendMessage(JSON.stringify(e))}},ws,readyToSend=!1;