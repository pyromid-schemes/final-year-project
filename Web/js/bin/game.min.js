function getAccurateCoords(){var a=game.phaser.input.activePointer;return{x:a.x-1,y:a.y-2}}function isPointWithinRect(a,b){return a.x>=b.x&&a.y>=b.y&&a.x<=b.x+b.w&&a.y<=b.y+b.h}function isPointWithinBoundingBox(a,b){return a.x>=b.x1&&a.y>=b.y1&&a.x<=b.x2&&a.y<=b.y2}function isXYWithinBoundingBox(a,b,c){return a>=c.x1&&b>=c.y1&&a<=c.x2&&b<=c.y2}var Tilemaps={chengy:{tilemapKey:"tilemap-chengy",tilemapPath:"assets/tilemaps/chengy-room.png"},lava:{tilemapKey:"tilemap-lava",tilemapPath:"assets/tilemaps/lava-room.png"},ghostRoom:{placeable:{tilemapKey:"tilemap-ghost-placeable",tilemapPath:"assets/tilemaps/placeable-room.png",suffix:"-placeable"},nonplaceable:{tilemapKey:"tilemap-ghost-nonplaceable",tilemapPath:"assets/tilemaps/non-placeable-room.png",suffix:"-nonplaceable"}}},Mobs={ant:{id:"ant",sprite:{key:"mobs-ant",image:"assets/mobs/ant.png",size:{width:16,height:16}},builderButton:{key:"builder-button-mob-ant",image:"assets/buttons/mobs/ant.png"}},bear:{id:"bear",sprite:{key:"mobs-bear",image:"assets/mobs/bear.png",size:{width:16,height:16}},builderButton:{key:"builder-button-mob-bear",image:"assets/buttons/mobs/bear.png"}}},Player={id:"player",sprite:{key:"player-key",image:"assets/player/player.png",size:{width:16,height:16},center:{x:8,y:10}}},Rooms={chengy_room:{room_id:"room1",w:4,h:4,center:{x:1,y:1},data:[[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],data2:[["tl","tm","tm","tr"],["ml","mm","mm","mr"],["ml","mm","mm","mr"],["bl","bm","bm","br"]],tilemap:Tilemaps.chengy,builderButton:{image:"assets/buttons/button4.png",key:"builder-button-chengy"}},chengy_room_5x3:{room_id:"room3",w:5,h:3,center:{x:2,y:1},data:[[1,1,1,1,1],[2,1,1,1,2],[1,1,1,1,1]],data2:[["tl","tm","tm","tm","tr"],["mm","mm","mm","mm","mm"],["bl","bm","bm","bm","br"]],tilemap:Tilemaps.lava,builderButton:{image:"assets/buttons/lava-5x3.png",key:"builder-button-lava5x3"}},chengy_room4doors:{room_id:"room2",w:4,h:4,center:{x:1,y:1},data:[[1,2,2,1],[2,1,1,2],[2,1,1,2],[1,2,2,1]],data2:[["tl","mm","mm","tr"],["mm","mm","mm","mm"],["mm","mm","mm","mm"],["bl","mm","mm","br"]],tilemap:Tilemaps.chengy,builderButton:{image:"assets/buttons/chengy-room-4doors.png",key:"builder-button-chengy4doors"}},chengy_room_door_up:{room_id:"room4",w:4,h:4,center:{x:1,y:1},data:[[1,2,2,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],data2:[["tl","mm","mm","tr"],["ml","mm","mm","mr"],["ml","mm","mm","mr"],["bl","bm","bm","br"]],tilemap:Tilemaps.chengy,builderButton:{image:"assets/buttons/chengy-room-door-up.png",key:"builder-button-chengy-door-up"}},l_shape_room:{room_id:"room5",w:4,h:4,center:{x:1,y:1},data:[[1,1,1,1],[1,1,1,2],[1,1,0,0],[1,2,0,0]],data2:[["tl","tm","tm","tr"],["ml","mm","bm","bm"],["ml","mr","",""],["bl","mr","",""]],tilemap:Tilemaps.chengy,builderButton:{image:"assets/buttons/l-room.png",key:"builder-button-l-room"}},room_6by6:{w:6,h:6,center:{x:2,y:2},data:[[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1],[1,1,1,1,1,1]]}},Builder={game:null,buttons:{},mobButtons:{},tile_selector:null,which_tile_to_place:-1,create:function(a){this.game=a,game.graphics.beginFill(14443363,1),game.graphics.drawRect(game.builderView.x,game.builderView.y,game.builderView.w,game.builderView.h),game.graphics.endFill(),this.createButton(600,40,Rooms.chengy_room),this.createButton(600,80,Rooms.chengy_room4doors),this.createButton(640,40,Rooms.chengy_room_5x3),this.createButton(640,80,Rooms.chengy_room_door_up),this.createButton(680,40,Rooms.l_shape_room),this.createMobButton(600,160,Mobs.ant),this.createMobButton(640,160,Mobs.bear),this.tile_selector=game.phaser.add.sprite(0,0,"builder-button-selector"),this.tile_selector.alpha=0},createButton:function(a,b,c){var d=game.phaser.add.sprite(a,b,c.builderButton.key);d.inputEnabled=!0,d.events.onInputDown.add(this.listener,this),this.buttons[c.builderButton.key]={tile:d,room_id:c.room_id}},createMobButton:function(a,b,c){var d=game.phaser.add.sprite(a,b,c.builderButton.key);d.inputEnabled=!0,d.events.onInputDown.add(this.listener,this),this.mobButtons[c.builderButton.key]={tile:d,mob_id:c.id}},listener:function(){var a=arguments[0],b=a.key;return this.which_tile_to_place==b?this.unselectTile():void this.selectTile(b)},isPlacingSomething:function(){return this.which_tile_to_place!=-1},isPlacingRoom:function(){return this.isPlacingSomething()&&"room"==this.typeOfTileToPlace},isPlacingMob:function(){return this.isPlacingSomething()&&"mob"==this.typeOfTileToPlace},getActiveButton:function(){return"room"==this.typeOfTileToPlace?this.game.builderObject.buttons[this.game.builderObject.which_tile_to_place]:"mob"==this.typeOfTileToPlace?this.game.builderObject.mobButtons[this.game.builderObject.which_tile_to_place]:null},selectTile:function(a){var b;if(a in this.buttons)b=this.buttons[a],this.typeOfTileToPlace="room";else{if(!(a in this.mobButtons))throw new Error("Error selecting tile with key ["+a+"]");b=this.mobButtons[a],this.typeOfTileToPlace="mob"}this.tile_selector.x=b.tile.x-2,this.tile_selector.y=b.tile.y-2,this.tile_selector.alpha=1,this.which_tile_to_place=a},unselectTile:function(){this.tile_selector.alpha=0,this.which_tile_to_place=-1,this.game.mapObject.redrawEverything()},keyOnDown:function(a){"Escape"==a.key&&this.unselectTile()}},game={phaser:null,start:function(){this.phaser=new Phaser.Game(800,600,Phaser.AUTO,"game",{preload:this.preload,create:this.create,update:this.update,render:this.render})},mapObject:null,builderObject:null,propertyObject:null,mapView:null,builderView:null,propertyView:null,invalidated:!1,redraws:0,preload:function(){game.phaser.load.image(Rooms.chengy_room.builderButton.key,Rooms.chengy_room.builderButton.image),game.phaser.load.image(Rooms.chengy_room4doors.builderButton.key,Rooms.chengy_room4doors.builderButton.image),game.phaser.load.image(Rooms.chengy_room_5x3.builderButton.key,Rooms.chengy_room_5x3.builderButton.image),game.phaser.load.image(Rooms.chengy_room_door_up.builderButton.key,Rooms.chengy_room_door_up.builderButton.image),game.phaser.load.image(Rooms.l_shape_room.builderButton.key,Rooms.l_shape_room.builderButton.image),game.phaser.load.image(Mobs.ant.builderButton.key,Mobs.ant.builderButton.image),game.phaser.load.image(Mobs.bear.builderButton.key,Mobs.bear.builderButton.image),game.phaser.load.image("builder-button-selector","assets/buttons/selector.png"),game.phaser.load.image("tile-empty-16","assets/buttons/empty-tile-16.png"),game.phaser.load.atlas(Tilemaps.chengy.tilemapKey,Tilemaps.chengy.tilemapPath,"assets/tilemaps/tilemap.json"),game.phaser.load.atlas(Tilemaps.lava.tilemapKey,Tilemaps.lava.tilemapPath,"assets/tilemaps/tilemap.json"),game.phaser.load.atlas(Tilemaps.ghostRoom.placeable.tilemapKey,Tilemaps.ghostRoom.placeable.tilemapPath,"assets/tilemaps/tilemap.json"),game.phaser.load.atlas(Tilemaps.ghostRoom.nonplaceable.tilemapKey,Tilemaps.ghostRoom.nonplaceable.tilemapPath,"assets/tilemaps/tilemap.json"),game.phaser.load.image(Mobs.ant.sprite.key,Mobs.ant.sprite.image),game.phaser.load.image(Mobs.bear.sprite.key,Mobs.bear.sprite.image),game.phaser.load.image(Player.sprite.key,Player.sprite.image)},create:function(){var a=game.phaser.add.graphics(0,0);window.graphics=a,game.graphics=a,game.mapView={x:0,y:0,w:550,h:500},game.builderView={x:550,y:0,w:250,h:600},game.propertyView={x:0,y:500,w:550,h:100},game.mapObject=Map,game.mapObject.create(game),game.builderObject=Builder,game.builderObject.create(game),game.propertyObject=Property,game.propertyObject.create(game),game.phaser.input.onDown.add(game.onDown,this),game.phaser.input.onUp.add(game.onUp,this),game.phaser.input.addMoveCallback(game.onMove,this),game.phaser.input.addMoveCallback(game.onMove,this),game.phaser.input.keyboard.onDownCallback=game.keyOnDown,game.phaser.canvas.oncontextmenu=function(a){a.preventDefault()}},update:function(){},render:function(){game.invalidated&&(game.invalidated=!1,game.mapObject.render())},onDown:function(a){var b=getAccurateCoords();isPointWithinRect(b,game.mapView)&&game.mapObject.onDown(a)},onUp:function(a){game.mapObject.onUp(a)},onMove:function(a){game.mapObject.onMove(a)},keyOnDown:function(a){game.mapObject.keyOnDown(a),game.builderObject.keyOnDown(a)},sendMessage:function(a,b){switch(a){case"create-mob":UnityClient.spawnMobCommand(b.objectId,b.xPos,b.yPos,b.id);break;case"create-room":UnityClient.buildCommand(b.objectId,b.xPos,b.yPos)}},worldStatusUpdate:function(a){game.mapObject.removeAllRooms();for(var b=0;b<a.length;b++)game.mapObject.placeRoomAtTopLeft(a[b].objectId,a[b].xPos,a[b].zPos,!1);game.mapObject.redrawEverything()},vrPositionUpdate:function(a){console.log("VR position update"),console.log("xPos: "+a.xPos+", zPos: "+a.zPos),game.mapObject.setPlayerPosition(a)}};window.addEventListener("load",function(){game.start(),window.game=game});var Map={game:null,map:null,mapDimensions:null,mapRooms:[],roomTypes:{},roomRendersCache:{},tileMapTypes:{},emptyTile:null,emptyTileBackground:null,mapScrollOffsetX:0,mapScrollOffsetY:0,dragCurrentX:0,dragCurrentY:0,isDragging:!1,ghostRoomX:-1,ghostRoomY:-1,player:null,mobTypes:{},mapMobs:[],debug_mob_ant:null,MAP_WIDTH:33,MAP_HEIGHT:30,TILE_SIZE:16,MAP_DRAW_OFFSET_X:10,MAP_DRAW_OFFSET_Y:10,create:function(a){this.game=a,this.game.graphics.beginFill(11920362,1),this.game.graphics.drawRect(this.game.mapView.x,this.game.mapView.y,this.game.mapView.w,this.game.mapView.h),this.game.graphics.endFill(),this.setupMap(),this.setupTiledBackground(),this.createTilemap(Tilemaps.chengy.tilemapKey),this.createTilemap(Tilemaps.lava.tilemapKey),this.createTilemap(Tilemaps.ghostRoom.placeable.tilemapKey),this.createTilemap(Tilemaps.ghostRoom.nonplaceable.tilemapKey),this.addRoom(Rooms.chengy_room),this.addRoom(Rooms.chengy_room4doors),this.addRoom(Rooms.chengy_room_5x3),this.addRoom(Rooms.chengy_room_door_up),this.addRoom(Rooms.l_shape_room),this.addMob(Mobs.ant),this.addMob(Mobs.bear),this.setupPlayer(Player),this.mapScrollOffsetX+=272,this.mapScrollOffsetY+=240,this.placeRoomAtTopLeft(Rooms.chengy_room4doors.room_id,-1,-1,!1),this.game.invalidated=!0},setupMap:function(){var a=this.MAP_WIDTH*this.TILE_SIZE,b=this.MAP_HEIGHT*this.TILE_SIZE,c=game.phaser.make.bitmapData(a,b);c.rect(0,0,a,b,"#000"),this.mapDimensions={x:this.MAP_DRAW_OFFSET_X,y:this.MAP_DRAW_OFFSET_Y,w:a,h:b};var d=a+2,e=b+2,f=game.phaser.make.bitmapData(d,e);f.rect(0,0,d,e,"#f00"),game.phaser.add.sprite(this.MAP_DRAW_OFFSET_X-1,this.MAP_DRAW_OFFSET_Y-1,f),game.phaser.add.sprite(this.MAP_DRAW_OFFSET_X,this.MAP_DRAW_OFFSET_Y,c),this.map=this.game.phaser.add.renderTexture(a,b,"map"),this.game.phaser.add.sprite(this.MAP_DRAW_OFFSET_X,this.MAP_DRAW_OFFSET_Y,this.map)},setupTiledBackground:function(){this.emptyTile=game.phaser.make.sprite(0,0,"tile-empty-16");for(var a=game.phaser.make.renderTexture((this.MAP_WIDTH+1)*this.TILE_SIZE,(this.MAP_HEIGHT+1)*this.TILE_SIZE,"empty-tiled-background"),b=0;b<this.MAP_WIDTH+1;b++)for(var c=0;c<this.MAP_HEIGHT+1;c++)a.renderRawXY(this.emptyTile,b*this.TILE_SIZE,c*this.TILE_SIZE);this.emptyTileBackground=this.game.phaser.make.image(0,0,a),this.renderEmptyTileBackground()},setupPlayer:function(a){var b=game.phaser.make.sprite(0,0,a.sprite.key);this.player={sprite:b,position:{x:0,y:0},size:a.sprite.size,center:a.sprite.center,is_visible:!0}},addRoom:function(a){this.roomTypes[a.room_id]={dimensions:a};for(var b=[{tilemap:a.tilemap.tilemapKey,key_suffix:""},{tilemap:Tilemaps.ghostRoom.placeable.tilemapKey,key_suffix:Tilemaps.ghostRoom.placeable.suffix},{tilemap:Tilemaps.ghostRoom.nonplaceable.tilemapKey,key_suffix:Tilemaps.ghostRoom.nonplaceable.suffix}],c=0;c<b.length;c++){for(var d=b[c],e=a.room_id+d.key_suffix,f=game.phaser.make.renderTexture(a.w*this.TILE_SIZE,a.h*this.TILE_SIZE,e),g=0;g<a.data2.length;g++)for(var h=0;h<a.data2[g].length;h++){var i=a.data2[g][h];""!=i&&f.renderRawXY(this.tileMapTypes[d.tilemap][i],h*this.TILE_SIZE,g*this.TILE_SIZE)}this.roomRendersCache[e]=this.game.phaser.make.image(0,0,f)}},addMob:function(a){this.mobTypes[a.id]={mob:a,render:this.game.phaser.make.sprite(0,0,a.sprite.key)}},createTilemap:function(a){this.tileMapTypes[a]={};for(var b=["tl","tm","tr","mr","br","bm","bl","ml","mm"],c=0;c<b.length;c++)this.tileMapTypes[a][b[c]]=game.phaser.make.sprite(0,0,a),this.tileMapTypes[a][b[c]].frameName=b[c]},renderEmptyTileBackground:function(){this.map.clear();var a=this.getMapDrawOffset();a.x-=this.TILE_SIZE,a.y-=this.TILE_SIZE,this.map.renderRawXY(this.emptyTileBackground,a.x,a.y)},renderAllRooms:function(){for(var a=0;a<this.mapRooms.length;a++){var b=this.mapRooms[a],c=b.x*this.TILE_SIZE+this.mapScrollOffsetX,d=b.y*this.TILE_SIZE+this.mapScrollOffsetY;this.map.renderRawXY(this.roomRendersCache[b.room_id],c,d)}},renderGhostRoom:function(){if(this.isMouseInsideMap())if(this.game.builderObject.which_tile_to_place!=-1&&"mob"==this.game.builderObject.typeOfTileToPlace){var a=this.game.builderObject.mobButtons[this.game.builderObject.which_tile_to_place],b=a.mob_id,c=this.mobTypes[b],d=this.getTileFromMouseXY(),e=getAccurateCoords();e.x-=this.MAP_DRAW_OFFSET_X,e.y-=this.MAP_DRAW_OFFSET_Y,e.x-=8,e.y-=8,this.map.renderRawXY(c.render,e.x,e.y)}else if(this.game.builderObject.which_tile_to_place!=-1&&"room"==this.game.builderObject.typeOfTileToPlace){var a=this.game.builderObject.buttons[this.game.builderObject.which_tile_to_place],f=a.room_id,g=this.roomTypes[f],d=this.getTileFromMouseXY(),h=(d.x-g.dimensions.center.x)*this.TILE_SIZE+this.mapScrollOffsetX,i=(d.y-g.dimensions.center.y)*this.TILE_SIZE+this.mapScrollOffsetY;this.canPlaceRoom(f,d.x,d.y)?this.map.renderRawXY(this.roomRendersCache[f+Tilemaps.ghostRoom.placeable.suffix],h,i):this.map.renderRawXY(this.roomRendersCache[f+Tilemaps.ghostRoom.nonplaceable.suffix],h,i)}},renderPlayer:function(){var a=this.player.position.x-this.player.center.x+this.mapScrollOffsetX,b=this.player.position.y-this.player.center.y+this.mapScrollOffsetY;this.map.renderRawXY(this.player.sprite,a,b)},renderMobs:function(){for(var a=0;a<this.mapMobs.length;a++){var b=this.mapMobs[a],c=b.x+this.mapScrollOffsetX,d=b.y+this.mapScrollOffsetY;this.map.renderRawXY(b.mob_type.render,c,d)}},redrawEverything:function(){this.game.invalidated=!0},render:function(){this.renderEmptyTileBackground(),this.renderAllRooms(),this.renderMobs(),this.renderPlayer(),this.renderGhostRoom(),this.game.redraws+=1,document.getElementById("redraw-count").innerHTML=this.game.redraws},onDown:function(a){if(this.isMouseInsideMap())if(this.game.builderObject.isPlacingMob()){var b=this.game.builderObject.getActiveButton(),c=this.mobTypes[b.mob_id],d=this.getMobPosXY(c.mob.sprite.size);this.canPlaceMob(b.mob_id,d)&&this.placeMob(b.mob_id,d,!0)}else if(this.game.builderObject.isPlacingRoom()){var b=this.game.builderObject.buttons[this.game.builderObject.which_tile_to_place],e=this.getTileFromMouseXY();this.canPlaceRoom(b.room_id,e.x,e.y)&&this.placeRoom(b.room_id,e.x,e.y,!0)}else{this.isDragging=!0;var f=this.game.phaser.input.activePointer;this.dragCurrentX=f.x,this.dragCurrentY=f.y}},onUp:function(a){this.isDragging&&(this.isDragging=!1)},onMove:function(a){if(this.isDragging){var b=this.game.phaser.input.activePointer,c=this.dragCurrentX-b.x,d=this.dragCurrentY-b.y;this.dragCurrentX=b.x,this.dragCurrentY=b.y,this.mapScrollOffsetX-=c,this.mapScrollOffsetY-=d,this.redrawEverything()}else if(this.game.builderObject.which_tile_to_place!=-1)if(this.isMouseInsideMap()){if("mob"==this.game.builderObject.typeOfTileToPlace)this.redrawEverything();else if("room"==this.game.builderObject.typeOfTileToPlace){var e=this.getTileFromMouseXY();this.ghostRoomX==e.x&&this.ghostRoomY==e.y||(this.ghostRoomX=e.x,this.ghostRoomY=e.y,this.redrawEverything())}}else this.ghostRoomX==-1&&this.ghostRoomY==-1||(this.ghostRoomX=-1,this.ghostRoomY=-1,this.redrawEverything())},keyOnDown:function(a){"r"==a.key},canPlaceMob:function(a,b){for(var c=(this.mobTypes[a],0);c<this.mapRooms.length;c++){var d=this.mapRooms[c];if(isXYWithinBoundingBox(b.x,b.y,d.abs_bb))return!0}return!1},placeMob:function(a,b,c){var d=this.mobTypes[a],e=this.mapMobs.length;console.log("placeMob");var f={x:b.x+d.mob.sprite.size.width/2,y:b.y+d.mob.sprite.size.height/2},g={x:f.x/this.TILE_SIZE,y:f.y/this.TILE_SIZE};if(this.mapMobs[e]={id:e,mob_id:a,x:b.x,y:b.y,center:f,mob_type:d,unity_position:g},console.log("Placed mob:"),console.log(this.mapMobs[e]),console.log("Creating mob:\nType: "+d.mob.sprite.key+"\nX: "+f.x+", Y: "+f.y+"\nUX: "+g.x+", UY: "+g.y),c){var h={command:"spawnMob",options:{objectId:a,xPos:g.x,zPos:g.y,id:e}};this.game.sendMessage("create-mob",h)}},canPlaceRoom:function(a,b,c){for(var d=this.roomTypes[a],e=this.getBoundingBoxForRoom(b,c,d),f=0;f<this.mapRooms.length;f++){var g=this.mapRooms[f];if(this.doesBoundingBoxesCollide(e,g.bb))return!1}return!0},placeRoomAtTopLeft:function(a,b,c,d){var e=this.roomTypes[a];this.placeRoom(a,b+e.dimensions.center.x,c+e.dimensions.center.y,d)},placeRoom:function(a,b,c,d){var e=this.roomTypes[a],f=this.mapRooms.length,g=this.getBoundingBoxForRoom(b,c,e),h=this.getAbsBoundingBoxForRoom(b,c,e);if(this.mapRooms[f]={room_id:a,x:b-e.dimensions.center.x,y:c-e.dimensions.center.y,x2:b,y2:c,bb:g,abs_bb:h,room:e},d){var i={objectId:a,xPos:b-e.dimensions.center.x,yPos:c-e.dimensions.center.y};this.game.sendMessage("create-room",i)}this.redrawEverything()},setPlayerPosition:function(a){this.player.position.x=a.xPos*this.TILE_SIZE,this.player.position.y=a.zPos*this.TILE_SIZE,console.log("px="+this.player.position.x+", py="+this.player.position.y),this.game.invalidated=!0},removeAllRooms:function(){for(;this.mapRooms.length;)this.mapRooms.pop()},getMapDrawOffset:function(){var a=this.mapScrollOffsetX%this.TILE_SIZE,b=this.mapScrollOffsetY%this.TILE_SIZE;return{x:a<0?a+this.TILE_SIZE:a,y:b<0?b+this.TILE_SIZE:b}},getTileFromMouseXY:function(){var a=getAccurateCoords();return{x:Math.floor((a.x-this.MAP_DRAW_OFFSET_X-this.mapScrollOffsetX)/this.TILE_SIZE),y:Math.floor((a.y-this.MAP_DRAW_OFFSET_Y-this.mapScrollOffsetY)/this.TILE_SIZE)}},getMobPosXY:function(a){var b=getAccurateCoords();return b.x-=this.MAP_DRAW_OFFSET_X+a.width/2+this.mapScrollOffsetX,b.y-=this.MAP_DRAW_OFFSET_Y+a.height/2+this.mapScrollOffsetY,b},doesBoundingBoxesCollide:function(a,b){return!(b.x1>a.x2||b.x2<a.x1||b.y1>a.y2||b.y2<a.y1)},getBoundingBoxForRoom:function(a,b,c){var d=a-c.dimensions.center.x,e=b-c.dimensions.center.y,f=d+c.dimensions.w-1,g=e+c.dimensions.h-1;return{x1:d,y1:e,x2:f,y2:g}},getAbsBoundingBoxForRoom:function(a,b,c){var d=this.getBoundingBoxForRoom(a,b,c);return d.x1*=16,d.y1*=16,d.x2*=16,d.y2*=16,d},isMouseInsideMap:function(){var a=getAccurateCoords();return isPointWithinRect(a,this.mapDimensions)}},Property={game:null,create:function(a){this.game=a,game.graphics.beginFill(3522888,1),game.graphics.drawRect(game.propertyView.x,game.propertyView.y,game.propertyView.w,game.propertyView.h),game.graphics.endFill()}};