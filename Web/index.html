<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Web Client Test</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css"/>
    <link rel="icon" href="favicon.ico">
</head>
<body>
    <!-- Nav bar -->
    <!--<section id="header" class="align&#45;&#45;center background&#45;&#45;purps color&#45;&#45;white">-->
        <!--This is the nav bar-->
    <!--</section>-->

    <!-- Game canvas -->
    <section id="game-section">
        <div id="game"></div>

        <div id="sse">
            <!-- just debug for amount of times everything is redrawn -->
            <div id="redraws">Amount of redraws: <span id="redraw-count">0</span></div>
            <p>Please enter the host you are connecting to and open the websocket before you send a message.</p>
            <p>When you are finished, please close the WebSocket.</p>
            <p>Make sure you check the console for now so that you can see what is going on.</p>
            <input id="url" type="text" value="localhost"/>
            <input id="openWSButton" type="button" value="Open connection" onclick="openWebSocket(config);"/>
            <input id="closeWSButton" type="button" value="Close connection" onclick="closeWebSocket();" disabled/>
        </div>
    </section>

    <!-- Footer -->
    <section id="footer" class="align--center background--purps color--white">
        This is the footer
    </section>


    <!-- Include JS scripts after page DOM has loaded -->
    <script src="js/phaser/phaser.min.js"></script>

    <!-- Game minified -->
    <script src="js/bin/game.min.js"></script>


    <!-- Jamie's WebSockets scripts minified -->
    <script src="js/bin/networking.min.js"></script>
    <script type="text/javascript" charset="UTF-8">
        var config = {
            "onOpen": function() {
                console.log("WebSocket opened.");
                document.getElementById("openWSButton").disabled = true;
                document.getElementById("closeWSButton").disabled = false;
            },
            "onMessage": {
                "worldStatus": game.worldStatusUpdate,
                "vrPosition": game.vrPositionUpdate,
                "mobPositions": game.mobsPositionUpdate
            },
            "onClose": function() {
                console.log("WebSocket closed.");
                document.getElementById("openWSButton").disabled = false;
                document.getElementById("closeWSButton").disabled = true;
            }
        };

        window.onload = function() {
            if ("WebSocket" in window) {
                console.log("WebSockets are available!");
            } else {
                alert("WebSockets are not supported in this browser");
            }
        };

    </script>
</body>
</html>
